(this["webpackJsonpmesto-react"]=this["webpackJsonpmesto-react"]||[]).push([[0],{18:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var a=n(1),o=n.n(a),c=n(19),s=n.n(c),i=(n(18),n(24)),r=n(2),l=n(3),u=n(20),p=n(21),d={adress:"https://api.avolk.ru"};console.log("apiData consts utils: ",d.token);var j=d,h=new(function(){function e(t){Object(u.a)(this,e),this._headerResponse=function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))},this._adress=t.adress}return Object(p.a)(e,[{key:"_getTokenFromLocalStorege",value:function(){return"Bearer ".concat(localStorage.getItem("jwt"))}},{key:"getInfoUser",value:function(){return console.log("\u0422\u043e\u043a\u0435\u043d \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u0434\u0430\u043d\u043d\u044b\u0445 \u044e\u0437\u0435\u0440\u0430 getInfoUser: ",this._getTokenFromLocalStorege()),fetch("".concat(this._adress,"/users/me"),{method:"GET",headers:{authorization:this._getTokenFromLocalStorege(),"Content-Type":"application/json"}}).then(this._headerResponse)}},{key:"getInitialCards",value:function(){return console.log("\u0422\u043e\u043a\u0435\u043d \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u0434\u0430\u043d\u043d\u044b\u0445 \u043a\u0430\u0440\u0442\u043e\u0447\u0435\u043a getInitialCards: ",this._getTokenFromLocalStorege()),fetch("".concat(this._adress,"/cards"),{headers:{authorization:this._getTokenFromLocalStorege(),"Content-Type":"application/json"}}).then(this._headerResponse)}},{key:"getDataUserAndCards",value:function(){return Promise.all([this.getInfoUser(),this.getInitialCards()])}},{key:"patchEditProfile",value:function(e){var t=e.name,n=e.about;return fetch("".concat(this._adress,"/users/me"),{method:"PATCH",headers:{authorization:this._getTokenFromLocalStorege(),"Content-Type":"application/json"},body:JSON.stringify({name:t,about:n})}).then(this._headerResponse)}},{key:"postAddNewCard",value:function(e){var t=e.name,n=e.link;return fetch("".concat(this._adress,"/cards"),{method:"POST",headers:{authorization:this._getTokenFromLocalStorege(),"Content-Type":"application/json"},body:JSON.stringify({name:t,link:n})}).then(this._headerResponse)}},{key:"deleteCard",value:function(e){return fetch("".concat(this._adress,"/cards/").concat(e),{method:"DELETE",headers:{authorization:this._getTokenFromLocalStorege(),"Content-Type":"application/json"}}).then(this._headerResponse)}},{key:"putHandlerLike",value:function(e,t){return t?fetch("".concat(this._adress,"/cards/").concat(e,"/likes"),{method:"PUT",headers:{authorization:this._getTokenFromLocalStorege(),"Content-Type":"application/json"}}).then(this._headerResponse):fetch("".concat(this._adress,"/cards/").concat(e,"/likes"),{method:"DELETE",headers:{authorization:this._getTokenFromLocalStorege(),"Content-Type":"application/json"}}).then(this._headerResponse)}},{key:"patchRefreshAvatar",value:function(e){var t=e.avatar;return console.log("patchRefreshAvatar API: ",this._getTokenFromLocalStorege()),fetch("".concat(this._adress,"/users/me/avatar"),{method:"PATCH",headers:{authorization:this._getTokenFromLocalStorege(),"Content-Type":"application/json"},body:JSON.stringify({avatar:t})}).then(this._headerResponse)}}]),e}())(j),b=n(7),m=n.p+"static/media/logo_mesto.c2821b38.svg",_=n(0);var f=function(e){var t=e.userEmail,n=e.onQuit;return Object(_.jsx)(_.Fragment,{children:Object(_.jsxs)("header",{className:"header",children:[Object(_.jsx)("a",{href:"https://praktikum.yandex.ru/",className:"header__link",target:"_blank",children:Object(_.jsx)("img",{src:m,alt:"\u043b\u043e\u0433\u043e\u0442\u0438\u043f",className:"header__logo"})}),Object(_.jsx)(l.b,{path:"/signup",children:Object(_.jsx)(b.b,{className:"header__link-login",to:"/signin",children:"\u0412\u043e\u0439\u0442\u0438"})}),Object(_.jsx)(l.b,{path:"/signin",children:Object(_.jsx)(b.b,{className:"header__link-login",to:"/signup",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"})}),Object(_.jsxs)(l.b,{exact:!0,path:"/",children:[Object(_.jsx)("p",{className:"header__user-email",children:t}),Object(_.jsx)(b.b,{className:"header__link-login",to:"/signin",onClick:function(){n()},children:"\u0412\u044b\u0439\u0442\u0438"})]})]})})},O=n(13),g=o.a.createContext();var x=function(e){var t=e.card,n=e.onCardClick,o=e.onCardImageClick,c=e.onCardLike,s=e.onCardDelete,i=e.loadingIndicator,r=Object(a.useContext)(g),l=t.owner===r._id,u="card__delete-btn ".concat(l?"":"card__delete-btn_non-active"),p=t.likes.some((function(e){return e===r._id})),d="card__like-btn ".concat(p?"card__like-btn_active":"");return Object(_.jsx)(_.Fragment,{children:Object(_.jsxs)("article",{className:"card",children:[Object(_.jsx)("img",{className:"card__image",src:t.link,alt:t.name,onClick:function(){n(t),o()}}),Object(_.jsx)("button",{onClick:function(){s(t)},className:u,type:"button"}),Object(_.jsxs)("div",{className:"card__element",children:[Object(_.jsxs)("h2",{className:"card__title",children:[" ",t.name]}),Object(_.jsxs)("div",{className:"card__like-container",children:[Object(_.jsx)("button",{id:"likeButton",className:d,"aria-label":"\u041f\u043e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043b\u0430\u0439\u043a",type:"button",onClick:function(){c(t)},disabled:i}),Object(_.jsxs)("div",{className:"card__like-counter",children:[" ",t.likes.length]})]})]})]})})};var v=function(e){var t=o.a.useContext(g),n=t.name,a=t.about,c=t.avatar;return Object(_.jsx)(_.Fragment,{children:Object(_.jsxs)("main",{className:"content",children:[Object(_.jsxs)("section",{className:"profile",children:[Object(_.jsx)("div",{className:"profile__avatar-container",onClick:e.onEditAvatar,children:Object(_.jsx)("img",{src:c,alt:n,className:"profile__avatar"})}),Object(_.jsxs)("div",{className:"profile__info",children:[Object(_.jsx)("h1",{className:"profile__name",children:n}),Object(_.jsx)("button",{className:"profile__edit-button",type:"button",onClick:e.onEditProfile})]}),Object(_.jsx)("p",{className:"profile__hobby",children:a}),Object(_.jsx)("button",{className:"profile__add-button",type:"button",onClick:e.onAddPlace})]}),Object(_.jsx)("section",{className:"cards",children:e.cards.map((function(t){return Object(_.jsx)(x,Object(O.a)({card:t,onCardClick:e.onCardClick,onCardImageClick:e.onCardImageClick,onCardLike:e.onCardLike,onCardDelete:e.onCardDelete,loadingIndicator:e.loadingIndicator},e),t._id)}))})]})})};var C=function(){return Object(_.jsx)(_.Fragment,{children:Object(_.jsx)("footer",{className:"footer",children:Object(_.jsx)("a",{href:"https://praktikum.yandex.ru/",className:"footer__link",children:"\xa9 2021 Mesto Russia"})})})};var k=function(e){return Object(_.jsx)(_.Fragment,{children:Object(_.jsx)("div",{className:e.isOpen?"pop-up pop-up_type_".concat(e.name," pop-up_opened"):"pop-up pop-up_type_".concat(e.name),children:Object(_.jsxs)("div",{className:"pop-up__container pop-up__container_opened_".concat(e.name),children:[Object(_.jsx)("button",{className:"pop-up__btn-close pop-up__btn-close_type_".concat(e.name),type:"button","aria-label":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c \u0444\u043e\u0440\u043c\u0443",onClick:e.onClose}),Object(_.jsxs)("form",{onSubmit:e.onSubmit,name:"".concat(e.name),action:"#",className:"pop-up__form pop-up__form_".concat(e.name),method:"POST",disabled:e.loadingIndicator,children:[Object(_.jsx)("h3",{className:"pop-up__form-title",children:e.title}),e.children,Object(_.jsx)("button",{className:"pop-up__form-btn-submit pop-up__form-btn-submit_comfirm",type:"submit",children:e.buttonText})]})]})})})};var N=function(e){return Object(_.jsx)(_.Fragment,{children:Object(_.jsx)("div",{className:e.isOpen?"pop-up pop-up_type_image-zoom pop-up_opened":"pop-up pop-up_type_image-zoom",children:Object(_.jsxs)("div",{className:"pop-up__container pop-up__container_opened_image-zoom",children:[Object(_.jsx)("button",{className:"pop-up__btn-close pop-up__btn-close_type_image-zoom",type:"button","aria-label":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c \u0444\u043e\u0440\u043c\u0443",onClick:e.onClose}),Object(_.jsx)("img",{className:"pop-up__img",src:e.card.link,alt:e.card.name}),Object(_.jsx)("div",{className:"pop-up__description",children:e.card.name})]})})})};var y=function(e){var t=e.isOpen,n=e.onClose,o=e.onUpdateUser,c=Object(a.useContext)(g),s=Object(a.useState)(""),i=Object(r.a)(s,2),l=i[0],u=i[1],p=Object(a.useState)(""),d=Object(r.a)(p,2),j=d[0],h=d[1];return Object(a.useEffect)((function(){u(c.name),h(c.about)}),[c]),Object(_.jsxs)(k,{title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",name:"profile",onClose:n,isOpen:t,onSubmit:function(e){e.preventDefault(),o({name:l,about:j})},buttonText:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",children:[Object(_.jsx)("input",{value:l,onChange:function(e){u(e.target.value)},name:"input-name",type:"text",id:"name-input",className:"pop-up__form-input pop-up__form-input_type_name",placeholder:"\u0418\u043c\u044f \u0424\u0430\u043c\u0438\u043b\u0438\u044f",required:!0,minLength:"2",maxLength:"40",autoComplete:"off"}),Object(_.jsx)("span",{className:"pop-up__form-input-error",id:"name-input-error"}),Object(_.jsx)("input",{value:j,onChange:function(e){h(e.target.value)},name:"input-hobby",type:"text",id:"hobby-input",className:"pop-up__form-input pop-up__form-input_type_hobby",placeholder:"\u0425\u043e\u0431\u0431\u0438",required:!0,minLength:"2",maxLength:"200",autoComplete:"off"}),Object(_.jsx)("span",{className:"pop-up__form-input-error",id:"hobby-input-error"})]})};var S=function(e){var t=e.isOpen,n=e.onClose,o=e.onUpdateAvatar,c=Object(a.useState)(""),s=Object(r.a)(c,2),i=s[0],l=s[1];return Object(_.jsxs)(k,{title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",name:"avatar",isOpen:t,onClose:n,onSubmit:function(e){e.preventDefault(),o({avatar:i}),l("")},buttonText:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",children:[Object(_.jsx)("input",{value:i,onChange:function(e){l(e.target.value)},name:"input-avatar",id:"avatar-input",type:"url",className:"pop-up__form-input pop-up__form-input_type_link-avatar",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",required:!0}),Object(_.jsx)("span",{className:"pop-up__form-input-error",id:"avatar-input-error"})]})};var T=function(e){var t=e.isOpen,n=e.onClose,o=e.onAddPlace,c=Object(a.useState)(""),s=Object(r.a)(c,2),i=s[0],l=s[1],u=Object(a.useState)(""),p=Object(r.a)(u,2),d=p[0],j=p[1];return Object(_.jsxs)(k,{title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",name:"add-card",isOpen:t,onClose:n,onSubmit:function(e){e.preventDefault(),o({name:i,link:d}),l(""),j("")},buttonText:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c",children:[Object(_.jsx)("input",{value:i,onChange:function(e){l(e.target.value)},name:"input-name-image",type:"text",id:"name-image-input",className:"pop-up__form-input pop-up__form-input_type_image",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",required:!0,minLength:"2",maxLength:"30",autoComplete:"off"}),Object(_.jsx)("span",{className:"pop-up__form-input-error",id:"name-image-input-error"}),Object(_.jsx)("input",{value:d,onChange:function(e){j(e.target.value)},name:"input-url",type:"url",id:"url-input",className:"pop-up__form-input pop-up__form-input_type_url",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",required:!0,autoComplete:"off"}),Object(_.jsx)("span",{className:"pop-up__form-input-error",id:"url-input-error"})]})},L="https://api.avolk.ru";var E=function(e){var t=e.handleLogin,n=e.onFail,o=e.setOnFail,c=Object(a.useState)(""),s=Object(r.a)(c,2),i=s[0],u=s[1],p=Object(a.useState)(""),d=Object(r.a)(p,2),j=d[0],h=d[1],m=Object(l.g)();return Object(_.jsxs)("div",{className:"auth",children:[Object(_.jsx)("h2",{className:"auth__title",children:"\u0412\u0445\u043e\u0434"}),Object(_.jsxs)("form",{className:"auth__form",onSubmit:function(e){e.preventDefault(),i&&j||console.error("\u041d\u0435 \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u044b \u043d\u0435\u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043f\u043e\u043b\u044f"),function(e,t){return fetch("".concat(L,"/signin"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:e,email:t})}).then((function(e){return e.json()})).then((function(e){if(e.token)return e})).catch((function(e){return console.log(e)}))}(j,i).then((function(e){e.token?(u(""),h(""),localStorage.setItem("jwt",e.token),t(),o(""),m.push("/")):e.message&&o(e.message)})).catch((function(e){console.log("Error Login authorize: ".concat(e))}))},children:[Object(_.jsx)("input",{className:"auth__input",type:"email",required:!0,placeholder:"Email",onChange:function(e){return u(e.target.value)}}),Object(_.jsxs)("div",{className:"auth__input-container",children:[Object(_.jsx)("input",{className:"auth__input",type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",onChange:function(e){return h(e.target.value)}}),Object(_.jsx)("p",{className:"auth__error-field",children:n})]}),Object(_.jsx)("button",{type:"submit",className:"auth__submit-btn",children:"\u0412\u043e\u0439\u0442\u0438"}),Object(_.jsx)(b.b,{className:"auth__sign-in",to:"/signup",children:"\u0415\u0449\u0451 \u043d\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b? \u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"})]})]})},I=function(e){var t=e.setIsRegisterPopupOpen,n=e.setOnFail,o=Object(a.useState)(""),c=Object(r.a)(o,2),s=c[0],i=c[1],u=Object(a.useState)(""),p=Object(r.a)(u,2),d=p[0],j=p[1],h=Object(l.g)();return Object(_.jsxs)("div",{className:"auth",children:[Object(_.jsx)("h2",{className:"auth__title",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(_.jsxs)("form",{className:"auth__form",onSubmit:function(e){e.preventDefault(),console.log("password: ",d," email: ",s),function(e,t){return fetch("".concat(L,"/signup"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:e,email:t})}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){return console.log("Error auth register ".concat(e))}))}(d,s).then((function(e){console.log("handleSubmit: ",e),e?(t(e),n(""),h.push("/signin")):t(e.data)})).catch((function(e){console.log("Error handleSubmit register: ".concat(e))}))},children:[Object(_.jsx)("input",{className:"auth__input",type:"email",placeholder:"Email",required:!0,onChange:function(e){return i(e.target.value)}}),Object(_.jsx)("input",{className:"auth__input",type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",required:!0,onChange:function(e){return j(e.target.value)}}),Object(_.jsx)("button",{type:"submit",className:"auth__submit-btn",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"}),Object(_.jsx)(b.b,{className:"auth__sign-in",to:"/signin",children:"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b? \u0412\u043e\u0439\u0442\u0438"})]})]})},F=n(25),A=function(e){var t=e.component,n=Object(F.a)(e,["component"]);return Object(_.jsx)(l.b,{children:function(){return n.loggedIn?Object(_.jsx)(t,Object(O.a)({},n)):Object(_.jsx)(l.a,{to:"./signin"})}})},P=n.p+"static/media/Error.df8eddf6.svg",D=n.p+"static/media/Success.1b6082f8.svg",w=function(e){var t=e.isOpen,n=e.onClose;return Object(_.jsx)("div",{className:"pop-up ".concat(t?"pop-up_opened":""),children:Object(_.jsxs)("div",{className:"pop-up__container\r pop-up__container_type_tooltip",children:[Object(_.jsx)("img",{alt:"\u0442\u0443\u0442 \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u0438\u043a\u043e\u043d\u043a\u0430",className:"pop-up__img",src:t.success?D:P}),Object(_.jsx)("h2",{className:"pop-up__form-title pop-up__title_type_tooltip",children:t.data?"\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043b\u0438\u0441\u044c!":t.message}),Object(_.jsx)("button",{className:"pop-up__btn-close\n        pop-up__btn-close_type_tooltip",type:"button","aria-label":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c \u0444\u043e\u0440\u043c\u0443",onClick:n})]})})};var R=function(e){var t=e.isOpen,n=e.onClose,a=e.card,o=e.onDeleteCard,c=e.loadingIndicator;return Object(_.jsx)(k,{name:"avatar",title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",isOpen:t,onClose:n,buttonText:"\u0414\u0430",onSubmit:function(e){e.preventDefault(),o(a)},loadingIndicator:c})};var z=function(){var e=Object(a.useState)({name:"",about:"",avatar:"",_id:"",email:""}),t=Object(r.a)(e,2),n=t[0],o=t[1],c=Object(a.useState)([]),s=Object(r.a)(c,2),u=s[0],p=s[1],d=Object(a.useState)(""),j=Object(r.a)(d,2),b=j[0],m=j[1],O=Object(a.useState)(!1),x=Object(r.a)(O,2),F=x[0],P=x[1],D=Object(a.useState)(!1),z=Object(r.a)(D,2),U=z[0],q=z[1],J=Object(a.useState)(!1),B=Object(r.a)(J,2),H=B[0],G=B[1],M=Object(a.useState)(!1),Q=Object(r.a)(M,2),K=Q[0],V=Q[1],W=Object(a.useState)(!1),X=Object(r.a)(W,2),Y=X[0],Z=X[1],$=Object(a.useState)(!1),ee=Object(r.a)($,2),te=ee[0],ne=ee[1],ae=Object(a.useState)(!1),oe=Object(r.a)(ae,2),ce=oe[0],se=oe[1],ie=Object(a.useState)(""),re=Object(r.a)(ie,2),le=re[0],ue=re[1],pe=Object(a.useState)(!1),de=Object(r.a)(pe,2),je=de[0],he=de[1],be=Object(a.useState)(!1),me=Object(r.a)(be,2),_e=me[0],fe=me[1],Oe=Object(l.g)();Object(a.useEffect)((function(){ce&&h.getDataUserAndCards().then((function(e){console.log("getDataUserAndCards Token All: ",localStorage.jwt);var t=Object(r.a)(e,2),n=t[0],a=t[1];console.log("\u041f\u043e\u043b\u0443\u0447\u0438\u043b\u0438 \u0434\u0430\u043d\u043d\u044b\u0435 \u043f\u0440\u0438 \u0432\u0445\u043e\u0434\u0435 getDataUserAndCards: ",n),o(n),m(n.email),p(a)})).catch((function(e){console.log(e)}))}),[ce]);var ge=function(){var e,t=localStorage.getItem("jwt");console.log("\u041f\u0440\u043e\u0432\u0435\u0440\u0438\u043b\u0438 \u043d\u0430\u043b\u0438\u0447\u0438\u0435 \u0442\u043e\u043a\u0435\u043d\u0430 tokenCheck: ",t),t&&(e=t,fetch("".concat(L,"/users/me"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){return console.log(e)}))).then((function(e){console.log("checkToken DATA: ",e),e&&(m(e.email),se(!0),Oe.push("/"))})).catch((function(e){console.log("Error checkToken: ".concat(e," "))}))};function xe(){P(!1),q(!1),G(!1),V(!1),ne(!1),fe(!1)}Object(a.useEffect)((function(){ge()}),[Oe]);var ve=Object(a.useState)({}),Ce=Object(r.a)(ve,2),ke=Ce[0],Ne=Ce[1];return Object(a.useEffect)((function(){function e(e){return"Escape"===e.key?xe():null}return(F||U||H||K||te)&&document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[F,U,H,K,te]),Object(_.jsx)(g.Provider,{value:n,children:Object(_.jsxs)("div",{className:"page",children:[Object(_.jsx)(f,{userEmail:b,onQuit:function(){localStorage.removeItem("jwt"),se(!1),m(""),Oe.push("/signin"),console.log("handleLogout: ",n)}}),Object(_.jsxs)(l.d,{children:[Object(_.jsxs)(l.b,{exact:!0,path:"/",children:[ce?Object(_.jsx)(l.a,{to:"/"}):Object(_.jsx)(l.a,{to:"/signin"}),Object(_.jsx)(A,{exact:!0,path:"/",loggedIn:ce,component:v,loadingIndicator:je,onEditAvatar:function(){G(!0)},onEditProfile:function(){P(!0)},onAddPlace:function(){q(!0)},onCardClick:function(e){Z(e)},onCardImageClick:function(){V(!0)},cards:u,onCardLike:function(e){var t=e.likes.some((function(e){return e===n._id}));h.putHandlerLike(e._id,!t).then((function(t){var n=u.map((function(n){return n._id===e._id?t:n}));p(n)})).catch((function(e){return console.log(e)}))},onCardDelete:function(e){fe(!0),Ne(e)}})]}),Object(_.jsx)(l.b,{path:"/signup",children:Object(_.jsx)(I,{setIsRegisterPopupOpen:ne,isOpen:te,setOnFail:ue})}),Object(_.jsx)(l.b,{path:"/signin",children:Object(_.jsx)(E,{handleLogin:function(){se(!0)},onFail:le,setOnFail:ue})})]}),Object(_.jsx)(C,{}),Object(_.jsx)(w,{isOpen:te,onClose:xe}),Object(_.jsx)(y,{isOpen:F,onClose:xe,onUpdateUser:function(e){var t=e.name,n=e.about;h.patchEditProfile({name:t,about:n}).then((function(e){o(e),xe()})).catch((function(e){return console.log(e)}))}}),Object(_.jsx)(T,{title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",name:"add-card",isOpen:U,onClose:xe,onAddPlace:function(e){var t=e.name,n=e.link;he(!0),h.postAddNewCard({name:t,link:n}).then((function(e){console.log("handleAddPlaceSubmit newCard: ",e),console.log("handleAddPlaceSubmit cards: ",u),p([e].concat(Object(i.a)(u))),xe(),he(!1)})).catch((function(e){return console.log(e)}))},buttonText:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"}),Object(_.jsx)(S,{isOpen:H,onClose:xe,onUpdateAvatar:function(e){var t=e.avatar;h.patchRefreshAvatar({avatar:t}).then((function(e){o(e),xe()})).catch((function(e){return console.log(e)}))}}),Object(_.jsx)(k,{title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",name:"confirm",onClose:xe,buttonText:"\u0414\u0430"}),Object(_.jsx)(N,{onClose:xe,card:Y,isOpen:K}),Object(_.jsx)(R,{isOpen:_e,onClose:xe,card:ke,onDeleteCard:function(e){he(!0),h.deleteCard(e._id).then((function(){var t=u.filter((function(t){return t._id!==e._id}));p(t),he(!1),xe()})).catch((function(e){return console.log(e)}))},loadingIndicator:je})]})})},U=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,40)).then((function(t){var n=t.getCLS,a=t.getFID,o=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),o(e),c(e),s(e)}))};s.a.render(Object(_.jsx)(o.a.StrictMode,{children:Object(_.jsx)(b.a,{children:Object(_.jsx)(z,{})})}),document.getElementById("root")),U()}},[[39,1,2]]]);
//# sourceMappingURL=main.eb6119f1.chunk.js.map